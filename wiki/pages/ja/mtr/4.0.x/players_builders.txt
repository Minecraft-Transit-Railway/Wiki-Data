FIXME **このページはまだ完全には、翻訳されません。翻訳の完了を支援して下さい。**\\ //（翻訳が完了したらこの段落を削除して下さい）//

====== MTR4.0 ======
Minecraft Transit Railway 4.0 は、MTR 3.2 の後継となる Minecraft Transit Railway Modのメジャー アップデートです。既存のMTR3を導入していたワールドのMTR4へのアップグレードは、若干の不具合を伴いますが利用可能です。

このリリースでは、機能改良、長年のクラッシュやバグの修正、フレームレートの大幅な改善、編成内の混結など、長らく要望のあった機能の追加に重点を置いています。 

===== 主な機能と改善点 =====

==== 側線ごとの編成の組成 ====

以前のバージョンでは各車両基地の側線に原則として1形式しか配置できませんでしたが、MTR 4 では、側線に他の形式の車両を自由に組成できます。

たとえば、**SP1900 (先頭車)、M-Train (中間車)、K-Train (後尾車)** を使用して、側線用のカスタム編成を作成し、その編成を線路で走らせることができます。

これは、混合車両構成 (長さの異なる車体を連結された路面電車車両など、いわゆる「変態連結((主に気動車で見られる、中間に先頭車両を挟んだ車両など。))」も可能。)、塗装、および他の編成を牽引する機関車に便利です。

{{:mtr:mtr4_consist.png?400|UI Configuration for MTR 4 Consist}}

==== 加減速度の仕様変更 ====

列車の加速度と減速度が分離されました。

==== レール接続ツールのプレビュー ====

ノードに接続されたレールを接続する前に、レール接続ツールを保持すると、レールの線形がどのように見えるかのプレビューが表示されます。

{{:mtr:mtr4_trackpreview.png?600|Track Preview of MTR 4, before it is connected}}

==== レールの線形とカスタムモデル ====

レールの線形とカスタムモデルを適用できるようになりました。この機能はNTEから組み込まれており、原則としてそのままの状態で利用可能。

{{:mtr:mtr4_railcustomization.png?600|Custom Rail Shape & Model GUI}}

MTR4では、カスタムレールモデル (レール形式) により複数のモデルを使用できるため、さまざまなレール形式を合成できます。すべてのレール形式を削除すると、レールは透明になります。

==== 水平/斜行エレベーター ====

エレベーターは垂直と水平に同時に移動できるようになり、既存の垂直ガイドレールに加えて水平ガイドレールが追加されました。

{{:mtr:mtr4_elevator.png?600|Elevator going up diagonally}}

速度は600m/min(10m/s)とMTR3の半分になっております。

==== 改良されたシステムマップ ====

書き換えられたシステムマップは、見た目が改良され、動作が軽くなったことにより、信頼性も高まりました。

{{:mtr:mtr4_sysmap.png?600|Online System Map for MTR 4}}

==== 信号灯 ====

信号灯を斜めに配置できるようになりました (22.5 度刻み)。また、特定の色の閉塞信号の側面のみを表示するようにフィルタリングできるようになりました。

{{:mtr:mtr4_signallight.png?600|MTR Signal Light placed diagonally}}

==== 車体動揺 ====

列車の走行中に車両が左右に揺れるようになり、乗車体験が向上しました。

==== OBJレンダリング ====

OBJモデルはNemo Transit Expansionから組み込まれ、MTR4に統合されました。

つまり、MTRは .obj形式でエクスポートされる詳細な列車/線路モデルをサポートできるようになりました。

==== 橋りょう建設ツール ====

建設速度がMTR3単体と比較して建設速度が向上しました。

==== 距離効果 ====

MTR4では、[[https://ja.minecraft.wiki/w/%E8%B7%9D%E9%9B%A2%E5%8A%B9%E6%9E%9C/Java_Edition|距離効果]] の多くが緩和されました。鉄道施設や列車は、非常に高い距離 (つまり、デフォルト設定のワールド境界付近) でも正しくレンダリングされ、[[ja:mtr:dashboards|ダッシュボード]] も、エリアを変更しても精度を失うことなく正しく機能します。

{{:mtr:mtr4_disteffect.png?600}}

==== FPSのラグ ====

NTE アドオンのレンダリング最適化が **Minecraft-Mappings** プロジェクトに統合されました。これはMTR4.0でも使用されています。これにより、ゲームプレイ中のFPSが大幅に向上する可能性があります。((
[[https://www.youtube.com/watch?v=isNtUyUaNjY&t=104s|https://www.youtube.com/watch?v=isNtUyUaNjY&t=104s]]
))

==== サーバーラグ ====

バックエンドが書き直され、Minecraftスレッドで実行されなくなりました。これにより、ゲームループの実行速度が向上し、TPS((20が正常))がより安定し、MSPT((50以下が正常))が低くなります。

この改善は、規模の大きい路線ネットワークを備えた大規模なMTRサーバーでより顕著になります。
==== Modの互換性 ====

MTR3で報告された主要なmod互換性の問題は MTR4で解決されています。主な問題は次のとおりです:

  * 船の車両基地を作成するときにクラッシュする (MrCrayFish Framework)
  * 1.20.1 でインベントリを開くときにクラッシュする (Botarium)
  * ロケットから追い出される (Ad Astra)
  * JEI/The One Probe を使用すると、目に見えない MTR エンティティが常に表示される

===== その他の改善点 =====

==== レッドストーンで動くホームドア ====

ホームドアおよびエレベーターのドアにレッドストーン信号を与えると開閉できるようになりました。

==== 自動放送ブロックの遅延 ====

自動放送ブロックの音声は、列車が通過した後、乗客に再生されるまで一定時間遅延できるようになりました。

==== ダッシュボードの改善 ====

ダッシュボードは MTR 3よりも大幅に軽量化され、プレイヤーが現在いるY座標の周囲を表示できる地下モードも追加されました。
==== ホームのハーフブロック ====

ホームブロックにハーフブロックが追加されました。

==== モザイクブロック ====

MTR4にモザイクブロックが追加されました。これは、香港MTR駅でよく見られるモザイクタイルを再現したものです。
===== 挙動の変化 =====

==== シングルプレイヤーでのゲームの一時停止 ====

新しいMTRバックエンドの変更により、現在、メニュー画面を表示するなどのゲームが一時停止された後でもMTRの列車シミュレーションは継続されます。

==== 電車への乗車 ====

電車に乗車するには、一般の電車エリアではなく、ドアが開いたときにドアエリアの部分から乗車する必要があります。


==== 列車挙動の変更 ====

MTR 4 では、台車の位置を考慮して列車の動きが若干変更されています。ただし、これにより、MTR 3 で構築された非常に狭いトンネルや構造物へ内輪差で列車がめり込む可能性があり、変更に対応するために調整が必要になる場合があります。

===== 機能の削除（重要） =====
MTR3から削除された機能や、まだ実装されていない機能がいくつかあります。

  * **__Nemo Transit Expansionの「スクリプト」機能に依存するリソースパックは、<color #ed1c24>現時点では機能しません。</color>__**
  * 手動運転は、単に移植するのではなく、大幅な見直しが必要なため、**<color #ed1c24>完全に削除されました。</color>**//マスコンキー// は、クリエイティブタブから削除され、コマンドから入手する必要があります。
  * 停車駅など詳細を表示する縦置き発車標は機能せず、8先の便を表示する発車標が引き続き表示されます。

===== MTR3からの移行 =====

移行は、MTR3を導入していたワールドをロードする際に自動的に行われます。ワールドにロードした後、コマンド''/mtr generate''を実行して、すべての車両基地からの経路を更新し、列車を再び運行させる必要があります。

アップグレード後には、以下に示すような現象がいくつか発生することに注意してください。

  * MTR4は現在、1.19.4Sodium環境下では正常に動作しません。アップグレードする場合は、新しいMinecraftバージョンへのアップグレードを検討してください。
  * エレベーターの表示パネルが正しく表示されない場合があります。これは 1 回限りの移行の問題であり、解除して再度配置する必要があります。
  * 前述の通り、列車が台車の位置をより正確にシミュレートするようになったため、**列車がMTR3用に構築された狭いトンネル/橋をめり込む場合があります**。 これらの構造物は、MTR4の新しい列車の動きに対応するために再構築/変更する必要がある場合があります。
  * 列車が遅れている場合、列車は自動的に速度を上げたり、停車時間を短縮しようとします。 側線ごとにこれを0%にして、MTR3のときのような動作にすることもできます。(列車はスケジュールに関係なく同じ速度で走行します)
  * Nemo Transit Expansion (NTE) で構成されたレールモデルは、左右反転されます。非対称のレールモデルの場合は、再度反転する必要があります。
  * さまざまなMTRアドオンの新しいバージョンでは、MTR3で構築されたブロックが破損する変更が加えられている可能性があります。


===== アドオンの互換性 =====
バックエンドの大幅な書き換えにより、MTR Mod に依存するアドオンのほとんど、またはすべてを更新する必要があります。アドオンの網羅的ではないリストは [[mtr_addon:start|こちら]] で参照できます。これらのアドオンには MTR 3/4タグが適切に適用されています。

[[mtr_addon:lu:start|The Tube]]や[[mtr_addon:jcm:start|Joban Client Mod]]などの非常に人気のあるアドオンは、MTR Mod に多くの機能がすでに組み込まれている [[mtr_addon:nte:start|Nemo's Transit Expansion]] を**除き**、MTR4ですでに利用できると思われます。

