等待修复  **此页面没有被翻译完全。请帮助翻译本页。此页面使用AI翻译，需要更精细的翻译**\\ //(当全文翻译完时请移除这个段落。)//

====== MTR 4 服务器管理员指南 ======

了解将您的 Minecraft 服务器迁移至 MTR 4 所需的知识！

===== 迁移步骤 ======

==== 迁移前请注意 ====

  * 一些附加模组，例如 [[mtr_addon:nte:start|Nemo Transit Expansion]] 和 [[https://modrinth.com/mod/transitmanager|TransitManager]]，尚未发布 MTR 4 版本。请在升级前仔细检查您的附加模组列表并评估您的升级路径。
  * MTR 4 要求 Minecraft 版本为 1.16.5、1.17.1、1.18.2、1.19.2、1.19.4、1.20.1 或 1.20.4 其中之一。如果您当前使用的不是所列版本，请考虑升级/降级您的 Minecraft 版本。
  * **在进行迁移前，请务必进行备份！此过程不可逆转！**



==== 迁移过程 ====

MTR 4 会自动迁移来自 MTR 3 的数据，对用户来说步骤应该不多。无论如何，现将流程概述如下：

  - 关闭 Minecraft 服务器，将服务器 mod 目录中的 MTR 3 模组 jar 文件替换为 MTR 4 版本。
  - 启动服务器。请注意，首次启动可能需要更长时间，因为 MTR 会尝试自动将您的 MTR 3 数据迁移到 MTR 4。后续启动会快得多。
  - 服务器启动后，您应该运行 `/mtr generate` 命令以刷新所有车辆段的路径，并让列车重新运行起来。

===== 性能表现 ======

MTR 4 不再使用 Minecraft 游戏主线程来模拟列车运行，而是改为在后台线程中运行模拟。这意味着 MTR 4 现在对服务器刻速率的影响要小得多。同时，列车模拟不再受 Minecraft 游戏刻速率的影响。请注意，这也可能导致 CPU 使用率有所上升。

===== 升级 Minecraft 版本 ======

虽然升级 Minecraft 版本看起来是直接的一步，但需要注意一些事项，更重要的是：

  * 数据包可能会损坏，因为命令语法在 Minecraft 版本之间会发生变化。
  * 从 1.16/1.17 升级到 1.18+ 时，地形生成会有所不同，即使使用 WorldEdit，您也无法将地形重新生成为 1.17 的形式。
  * 升级到 1.20 时，字体 json 格式已更改。继续使用旧格式将导致（例如 JCM PIDS 中的）字体显示为方块。